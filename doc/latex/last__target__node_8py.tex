\hypertarget{last__target__node_8py}{}\doxysection{scripts/last\+\_\+target\+\_\+node.py File Reference}
\label{last__target__node_8py}\index{scripts/last\_target\_node.py@{scripts/last\_target\_node.py}}


Node that outputs the last target position set by the user.  


\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{last__target__node_8py_ab008b60400d4c4edee1ef9b1250d3cd2}{last\+\_\+target\+\_\+node.\+last\+\_\+target\+\_\+clbk}} (msg)
\begin{DoxyCompactList}\small\item\em Callback function for the target position subscription. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{last__target__node_8py_a007df04f635037aa7bc2e665b55c677e}{last\+\_\+target\+\_\+node.\+return\+\_\+values}} (req)
\begin{DoxyCompactList}\small\item\em Service handler that returns the stored target coordinates. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{last__target__node_8py_a35020de80e5775e0b0b636da81273a9b}{last\+\_\+target\+\_\+node.\+main}} ()
\begin{DoxyCompactList}\small\item\em Main function that initializes the node and sets up communication. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{last__target__node_8py_a932a074bf172052c47f4fc353d2ecdd4}\label{last__target__node_8py_a932a074bf172052c47f4fc353d2ecdd4}} 
float {\bfseries last\+\_\+target\+\_\+node.\+x} = 0.\+0
\item 
\mbox{\Hypertarget{last__target__node_8py_a7d0e8e8ed657efcde727657737166a2a}\label{last__target__node_8py_a7d0e8e8ed657efcde727657737166a2a}} 
float {\bfseries last\+\_\+target\+\_\+node.\+y} = 0.\+0
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Node that outputs the last target position set by the user. 

\begin{DoxyAuthor}{Author}
Marco Petrosilli 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
15/03/2025
\end{DoxyDate}
Subscribes to\+: ~\newline
 /last\+\_\+target

Services \+: ~\newline
 target\+\_\+coord

Description \+:

This node provides a service to retrieve the last target position. It subscribes to the \textquotesingle{}/last\+\_\+target\textquotesingle{} topic to receive position updates, then stores these coordinates to be retrieved later through the \textquotesingle{}target\+\_\+coord\textquotesingle{} service. This functionality allows other nodes to query the most recent target position without needing to subscribe to the position topic themselves. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{last__target__node_8py_ab008b60400d4c4edee1ef9b1250d3cd2}\label{last__target__node_8py_ab008b60400d4c4edee1ef9b1250d3cd2}} 
\index{last\_target\_node.py@{last\_target\_node.py}!last\_target\_clbk@{last\_target\_clbk}}
\index{last\_target\_clbk@{last\_target\_clbk}!last\_target\_node.py@{last\_target\_node.py}}
\doxysubsubsection{\texorpdfstring{last\_target\_clbk()}{last\_target\_clbk()}}
{\footnotesize\ttfamily def last\+\_\+target\+\_\+node.\+last\+\_\+target\+\_\+clbk (\begin{DoxyParamCaption}\item[{}]{msg }\end{DoxyParamCaption})}



Callback function for the target position subscription. 


\begin{DoxyParams}{Parameters}
{\em msg} & The Pose\+Stamped message containing the target position \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None
\end{DoxyReturn}
This function is called whenever a new target position is published. It extracts the x and y coordinates from the received message and updates the global variables to store the most recent position data. The function handles coordinate transformation from the message format to simple x,y values that can be easily provided through the service. \mbox{\Hypertarget{last__target__node_8py_a35020de80e5775e0b0b636da81273a9b}\label{last__target__node_8py_a35020de80e5775e0b0b636da81273a9b}} 
\index{last\_target\_node.py@{last\_target\_node.py}!main@{main}}
\index{main@{main}!last\_target\_node.py@{last\_target\_node.py}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily def last\+\_\+target\+\_\+node.\+main (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Main function that initializes the node and sets up communication. 


\begin{DoxyParams}{Parameters}
{\em None} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
None
\end{DoxyReturn}
This function initializes the R\+OS node, sets up the subscriber to receive position updates, and advertises the service to provide coordinate information to other nodes. It then enters the main loop that keeps the node running until shutdown is requested. The node operates at a frequency of 10Hz, which balances responsiveness with system resource usage. \mbox{\Hypertarget{last__target__node_8py_a007df04f635037aa7bc2e665b55c677e}\label{last__target__node_8py_a007df04f635037aa7bc2e665b55c677e}} 
\index{last\_target\_node.py@{last\_target\_node.py}!return\_values@{return\_values}}
\index{return\_values@{return\_values}!last\_target\_node.py@{last\_target\_node.py}}
\doxysubsubsection{\texorpdfstring{return\_values()}{return\_values()}}
{\footnotesize\ttfamily def last\+\_\+target\+\_\+node.\+return\+\_\+values (\begin{DoxyParamCaption}\item[{}]{req }\end{DoxyParamCaption})}



Service handler that returns the stored target coordinates. 


\begin{DoxyParams}{Parameters}
{\em req} & The service request (empty in this case) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
target\+\_\+coord\+Response containing the x and y coordinates
\end{DoxyReturn}
This function handles requests to the \textquotesingle{}target\+\_\+coord\textquotesingle{} service. When called, it creates and returns a response object containing the current values of the global x and y coordinate variables. This service allows other nodes to query the last known target position without needing to manage their own subscription to position updates. 